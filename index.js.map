{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst pixabayKEY = '48935513-8997d7f633aa985d826258f4d';\nconst pixabayURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page, perPage) => {\n  try {\n    const response = await axios.get(pixabayURL, {\n      params: {\n        key: pixabayKEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\nexport const cleanGallery = () => {\n  gallery.innerHTML = '';\n};\n\nexport const renderImages = images => {\n  const card = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<a class=\"gallery-item\" href=\"${largeImageURL}\">\n          <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"info\">\n              <p><b>Likes:</b> ${likes}</p>\n              <p><b>Views:</b> ${views}</p>\n              <p><b>Comments:</b> ${comments}</p>\n              <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n          </div>\n        </a>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', card);\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, cleanGallery } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('.form-input');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-more');\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\nconst perPage = 40;\nconst lastPerPage = 15;\n\nfunction showLoader() {\n  loader.classList.add('active');\n}\nfunction hideLoader() {\n  loader.classList.remove('active');\n}\nfunction showLoadBtn() {\n  loadBtn.style.display = 'block';\n}\nfunction hideLoadBtn() {\n  loadBtn.style.display = 'none';\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = input.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a valid search query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  page = 1;\n  cleanGallery();\n  showLoader();\n  hideLoadBtn();\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    const images = data.hits;\n\n    hideLoader();\n\n    if (images.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      form.reset();\n      return;\n    }\n\n    renderImages(images);\n    form.reset();\n    totalHits = data.totalHits;\n    if (totalHits > page * perPage) showLoadBtn();\n  } catch (error) {\n    hideLoader();\n\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const lastPage = Math.ceil(totalHits / perPage);\n    const isLastPage = page === lastPage;\n    const currentPerPage = isLastPage ? lastPerPage : perPage;\n\n    const data = await fetchImages(query, page, currentPerPage);\n    hideLoader();\n\n    const images = data.hits;\n    renderImages(images);\n\n    const { height } = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    window.scrollBy({ top: height * 2, behavior: 'smooth' });\n\n    if (page >= lastPage) {\n      hideLoadBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n\n    iziToast.error({\n      message: 'An error occurred while loading more images.',\n      position: 'topRight',\n    });\n    console.error(error);\n  }\n});\n"],"names":["pixabayKEY","pixabayURL","fetchImages","query","page","perPage","axios","error","iziToast","gallery","cleanGallery","renderImages","images","card","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","input","loader","loadBtn","totalHits","lastPerPage","showLoader","hideLoader","showLoadBtn","hideLoadBtn","event","data","lastPage","height"],"mappings":"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"}